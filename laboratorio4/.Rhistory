setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
data <- read.dta("casen2013.dta")
###
# Limpiar datos
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data$HW <- (data$yopraj*12)/(data$o10*52)
data$logHW <- log(data$HW)
data$exp <- data$edad - data$esc - 5
# Diccionario de variables
# http://observatorio.ministeriodesarrollosocial.gob.cl/documentos/Libro_de_Codigos_Casen_2013_Base_Principal_Metodologia_Nueva.pdf
###
# Definir carpeta de trabajo, librerías y archivos
setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
data <- read.dta("casen2013.dta")
###
# Limpiar datos
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data$WHP <- (data$yopraj*12)/(data$o10*52)
data$logWHP <- log(data$HW)
data$exp <- data$edad - data$esc - 5
data <- data[data$edad >= 35,]
data <- data[data$edad <= 35,]
View(data)
setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
data <- read.dta("casen2013.dta")
###
# Limpiar datos
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data$WHP <- (data$yopraj*12)/(data$o10*52)
data$logWHP <- log(data$HW)
data$logWHP <- log(data$WHP)
data <- data[data$edad >= 35,]
# Diccionario de variables
# http://observatorio.ministeriodesarrollosocial.gob.cl/documentos/Libro_de_Codigos_Casen_2013_Base_Principal_Metodologia_Nueva.pdf
###
# Definir carpeta de trabajo, librerías y archivos
setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
data <- read.dta("casen2013.dta")
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data$WHP <- (data$yopraj*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
summary(lm(ln_WHP ~ sexo + esc + exp + exp2, data = data))
summary(lm(logWHP ~ sexo + esc + exp + exp2, data = data))
data$exp <- (data$exp)^2
# Diccionario de variables
# http://observatorio.ministeriodesarrollosocial.gob.cl/documentos/Libro_de_Codigos_Casen_2013_Base_Principal_Metodologia_Nueva.pdf
###
# Definir carpeta de trabajo, librerías y archivos
setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
data <- read.dta("casen2013.dta")
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data$WHP <- (data$yopraj*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
summary(lm(logWHP ~ sexo + esc + exp + exp2, data = data))
summary(lm(logWHP ~ sexo + esc + exp + exp2, data = data))
data <- data[data$logWHP != NaN ,]
# Definir carpeta de trabajo, librerías y archivos
setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
data <- read.dta("casen2013.dta")
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data$WHP <- (data$yopraj*12)/(data$o10*52)
replace(data$WHP, is.infinite(data$WHP), NA)
na.omit(data)
data$WHP[!is.finite(data$WHP)] <- NA
data <- na.omit(data)
data$logWHP <- log(data$WHP)
# Diccionario de variables
# http://observatorio.ministeriodesarrollosocial.gob.cl/documentos/Libro_de_Codigos_Casen_2013_Base_Principal_Metodologia_Nueva.pdf
###
# Definir carpeta de trabajo, librerías y archivos
setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
data <- read.dta("casen2013.dta")
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data$WHP <- (data$yopraj*12)/(data$o10*52)
data$WHP[!is.finite(data$WHP)] <- NA
data <- na.omit(data)
data$logWHP <- log(data$WHP)
View(data)
setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
data <- read.dta("casen2013.dta")
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data <- data[data$o10 > 0,]
data <- data[data$o10 > 30,]
data$WHP <- (data$yopraj*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
summary(lm(logWHP ~ sexo + esc + exp + exp2, data = data))
summary(lm(logWHP ~ sexo + esc + exp + exp2, data = data, weights = pondera))
# Diccionario de variables
# http://observatorio.ministeriodesarrollosocial.gob.cl/documentos/Libro_de_Codigos_Casen_2013_Base_Principal_Metodologia_Nueva.pdf
###
# Definir carpeta de trabajo, librerías y archivos
setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
data <- read.dta("casen2013.dta")
data$region
levels(data$region)
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data <- data[data$o10 > 30,]
data$WHP <- (data$yopraj*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
for(i in unique(data$region)) {
data[paste("type", i, sep="")] <- ifelse(data$region == i, 1, 0)
}
str(data)
for(i in unique(data$region)) {
data[paste("region", i, sep="")] <- ifelse(data$region == i, 1, 0)
}
data$region
data$regioni
data$region1
data$regionv
str(data)
data$regionmetropolitana
summary(lm(logWHP ~ sexo + esc + exp + exp2 + regionmetropolitana, data = data))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + regionmetropolitana, data = data, weights = pondera))
# Diccionario de variables
# http://observatorio.ministeriodesarrollosocial.gob.cl/documentos/Libro_de_Codigos_Casen_2013_Base_Principal_Metodologia_Nueva.pdf
###
# Definir carpeta de trabajo, librerías y archivos
setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
data <- read.dta("casen2013.dta")
###
# Limpiar datos y generar variables
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data <- data[data$o10 > 30,]
data$WHP <- (data$yopraj*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
for(i in unique(data$region)) {
data[paste("region", i, sep="")] <- ifelse(data$region == i, 1, 0)
}
# Regresiones
summary(lm(logWHP ~ sexo + esc + exp + exp2 + regionmetropolitana, data = data))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + regionmetropolitana, data = data, weights = pondera))
# Diccionario de variables
# http://observatorio.ministeriodesarrollosocial.gob.cl/documentos/Libro_de_Codigos_Casen_2013_Base_Principal_Metodologia_Nueva.pdf
###
# Definir carpeta de trabajo, librerías y archivos
setwd("/Users/pacha/analisis-de-datos-unab/laboratorio4/")
list.files()
library(foreign)
library(plyr)
library(dummy)
casen <- read.dta("casen2013.dta")
###
# Limpiar datos y generar variables
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data <- data[data$o10 > 30,]
data$WHP <- (data$yopraj*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
for(i in unique(data$region)) {
data[paste("region", i, sep="")] <- ifelse(data$region == i, 1, 0)
}
# Regresiones
summary(lm(logWHP ~ sexo + esc + exp + exp2 + regionmetropolitana, data = data))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + regionmetropolitana, data = data, weights = pondera))
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "rama1", "o10")
data <- data[keep]
data <- na.omit(data)
data <- rename(data, c("expr"="pondera", "yoprcor"="yopraj"))
data <- data[data$o10 > 30,]
data$WHP <- (data$yopraj*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
revalue(data$region, c("i. tarapaca" = "1"))
levels(data$region)
revalue(data$region, c("i. tarapaca" = "1"))
library(plyr)
revalue(data$region, c("i. tarapaca" = "1"))
levels(data$region)
revalue(data$region, c("i. tarapaca" = "1"))
levels(data$region)
revalue(data$region, c("i. tarapaca" = "1"))
levels(data$region)
revalue(data$region, c("i. tarapaca" = "1", "ii. antofagasta" = "2"))
levels(data$region)
revalue(data$region, c("metropolitana" = "13"))
levels(data$region)
mapvalues(data$region, from = c("metropolitana"), to = c("13"))
levels(data$region)
mapvalues(data$region, from = c("metropolitana", "xv. arica y parinacota"), to = c("13", "15"))
mapvalues(data$region, from = c("metropolitana", "xv. arica y parinacota"), to = c("13", "15"))
levels(data$region)
library(plyr)
revalue(data$region, c("metropolitana"="13"))
levels(data$region)
levels(data$region)
for(i in unique(data$region)) {
data[paste(i, sep="")] <- ifelse(data$region == i, 1, 0)
}
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana, data = data))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana, data = data, weights = pondera))
unzip(casen2013.dta.zip)
unzip("casen2013.dta.zip")
levels(data$rama1)
data<-data[rama1!=""x. no bien especificado",]
data<-data[rama1!="x. no bien especificado",]
data<-data[rama1 != "x. no bien especificado",]
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "rama1", "o10")
data <- data[keep]
data<-data[rama1 != "x. no bien especificado",]
data<-data[data$rama1 != "x. no bien especificado",]
levels(data$rama1)
data$rama1 <- factor(data$rama1)
levels(data$rama1)
levels(data$rama1)
str(data)
for(i in unique(data$rama1)) {
data[paste(i, sep="")] <- ifelse(data$rama1 == i, 1, 0)
}
levels(data$rama1)
data$"l.administrasci\xf3n p\xfablica y defensa"
levels(data$rama1)
data <- rename(data, c("l.administrasci\xf3n p\xfablica y defensa"="admpublica"))
data <- na.omit(data)
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "rama1", "o10")
data <- data[keep]
data <- rename(data, c("expr"="pondera"))
data <- data[data$o10 > 30,]
data$WHP <- (data$yoprcor*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
for(i in unique(data$region)) {
data[paste(i, sep="")] <- ifelse(data$region == i, 1, 0)
}
levels(data$rama1)
data<-data[data$rama1 != "x. no bien especificado",]
data$rama1 <- factor(data$rama1)
levels(data$rama1)
data <- rename(data, c("l.administrasci\xf3n p\xfablica y defensa"="admpublica"))
for(i in unique(data$rama1)) {
data[paste(i, sep="")] <- ifelse(data$rama1 == i, 1, 0)
}
data <- na.omit(data)
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "rama1", "o10")
data <- data[keep]
data <- rename(data, c("expr"="pondera"))
data <- data[data$o10 > 30,]
data$WHP <- (data$yoprcor*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
for(i in unique(data$region)) {
data[paste(i, sep="")] <- ifelse(data$region == i, 1, 0)
}
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "rama1", "o10")
data <- data[keep]
data <- casen
data <- na.omit(data)
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "rama1", "o10")
data <- data[keep]
data <- rename(data, c("expr"="pondera"))
data <- data[data$o10 > 30,]
data$WHP <- (data$yoprcor*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[data$o10 > 30,]
data$WHP <- (data$yoprcor*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
for(i in unique(data$region)) {
data[paste(i, sep="")] <- ifelse(data$region == i, 1, 0)
}
levels(data$rama1)
data<-data[data$rama1 != "x. no bien especificado",]
data$rama1 <- factor(data$rama1)
levels(data$rama1)
data <- rename(data, c("l.administrasci\xf3n p\xfablica y defensa"="admpublica"))
levels(data$rama1)
data <- rename(data, c("l.administrasci\xf3n p\xfablica y defensa"="admpublica"))
for(i in unique(data$rama1)) {
data[paste(i, sep="")] <- ifelse(data$rama1 == i, 1, 0)
}
levels(data$rama1)
data$"l.administrasci\xf3n p\xfablica y defensa"
data <- rename(data, c("l.administrasci\xf3n p\xfablica y defensa" = "admpublica"))
data[complete.cases(data),]
data <- data[complete.cases(data),]
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "rama1", "o10")
data <- data[keep]
data <- rename(data, c("expr"="pondera"))
data <- data[data$o10 > 30,]
data$WHP <- (data$yoprcor*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
for(i in unique(data$region)) {
data[paste(i, sep="")] <- ifelse(data$region == i, 1, 0)
}
levels(data$rama1)
data<-data[data$rama1 != "x. no bien especificado",]
data$rama1 <- factor(data$rama1)
levels(data$rama1)
for(i in unique(data$rama1)) {
data[paste(i, sep="")] <- ifelse(data$rama1 == i, 1, 0)
}
data <- rename(data, c("l.administrasci\xf3n p\xfablica y defensa" = "admpublica"))
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "rama1", "o10")
data <- data[keep]
data <- rename(data, c("expr"="pondera"))
data <- rename(data, c("expr"="pondera"))
data <- data[data$o10 > 30,]
data$WHP <- (data$yoprcor*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
for(i in unique(data$region)) {
data[paste(i, sep="")] <- ifelse(data$region == i, 1, 0)
}
levels(data$region)
drop <- c("NA")
data <- data[,!(names(data) %in% drop)]
levels(data$rama1)
data<-data[data$rama1 != "x. no bien especificado",]
data$rama1 <- factor(data$rama1)
levels(data$rama1)
for(i in unique(data$rama1)) {
data[paste(i, sep="")] <- ifelse(data$rama1 == i, 1, 0)
}
data <- rename(data, c("l.administrasci\xf3n p\xfablica y defensa" = "admpublica"))
drop <- c("NA")
data <- data[,!(names(data) %in% drop)]
data <- data[complete.cases(data),]
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana + admpublica, data = data))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana + admpublica, data = data, weights = pondera))
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "rama1", "o10")
data <- data[keep]
data <- rename(data, c("expr"="pondera"))
data <- data[data$o10 > 30,]
data$WHP <- (data$yoprcor*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
for(i in unique(data$region)) {
data[paste(i, sep="")] <- ifelse(data$region == i, 1, 0)
}
levels(data$rama1)
data<-data[data$rama1 != "x. no bien especificado",]
data$rama1 <- factor(data$rama1)
levels(data$rama1)
for(i in unique(data$rama1)) {
data[paste(i, sep="")] <- ifelse(data$rama1 == i, 1, 0)
}
data <- rename(data, c("l.administrasci\xf3n p\xfablica y defensa" = "admpublica"))
drop <- c("NA")
data <- data[,!(names(data) %in% drop)]
data <- data[complete.cases(data),]
data <- casen
keep <- c("expr", "yoprcor", "edad", "esc", "sexo", "region", "rama1", "o10")
data <- data[keep]
data <- data[data$o10 > 30,]
data$WHP <- (data$yoprcor*12)/(data$o10*52)
data$logWHP <- log(data$WHP)
data <- data[(data$edad >= 35 & data$edad <= 45),]
data$exp <- data$edad - data$esc - 5
data <- data[data$exp >= 0,]
data$exp2 <- (data$exp)^2
levels(data$region)
for(i in unique(data$region)) {
data[paste(i, sep="")] <- ifelse(data$region == i, 1, 0)
}
levels(data$rama1)
data<-data[data$rama1 != "x. no bien especificado",]
data$rama1 <- factor(data$rama1)
levels(data$rama1)
for(i in unique(data$rama1)) {
data[paste(i, sep="")] <- ifelse(data$rama1 == i, 1, 0)
}
data <- rename(data, c("l.administrasci\xf3n p\xfablica y defensa" = "admpublica"))
drop <- c("NA")
data <- data[,!(names(data) %in% drop)]
data <- data[complete.cases(data),]
# Regresiones
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana + admpublica, data = data))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana + admpublica, data = data, weights = expr))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana + rama1, data = data, weights = expr))
coefficients(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana + rama1, data = data, weights = expr))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana + rama1, data = data, weights = expr))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana + admpublica, data = data, weights = expr))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana + rama1, data = data, weights = expr))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + region + rama1, data = data, weights = expr))
summary(lm(logWHP ~ sexo + esc + exp + exp2 + metropolitana + admpublica, data = data, weights = expr))
